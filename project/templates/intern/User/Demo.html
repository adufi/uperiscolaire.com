{% extends 'intern/base.html' %}

{% block styles %}
<link rel="stylesheet" href="/static/styles/User.css" />
{% endblock %}

{% block main %}
<div id="User">

    <div id="User-status" class="form-status col-sm-12">
        <div class="form-alert alert alert-danger" role="alert"></div>
        <div class="form-alert alert alert-success" role="alert"></div>
    </div>

    <div id="Record" class="wrapper d-none">

        <div class="wrapper-title">
            <p class="title">Dossier inscription </p>
        </div>

        <div class="Record-wrapper wrapper-content">
            <div class="row">

                <div id="Record-status" class="form-status col-sm-12">
                    <div class="form-alert alert alert-danger" role="alert"></div>
                    <div class="form-alert alert alert-success" role="alert"></div>
                </div>

                <!-- ANNEE SCOLAIRE -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Année scolaires (Administrateur)</legend>

                    <!-- SCHOOL YEAR -->
                    <div class="form-group col-sm-6">
                        <label for="record_school_year"><b>2019 - 2020</b></label>
                        <input id="record_school_year" type="radio" onchange="" />
                        <br/>
                    </div>
                </fieldset>

                <!-- ... -->
                <fieldset class="col-sm-12 d-non">
                    <legend></legend>

                    <div class="form-group col-sm-6">
                        <label for="record_school_year"><b>2019 - 2020</b></label>
                        <input id="record_school_year" type="radio" onchange="" />
                        <br/>
                    </div>
                </fieldset>
                

                <!-- RENSEIGNEMENTS -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Renseignements enfant</legend>

                    <div class="">

                    </div>
                    <div class="form-group col-sm-6">
                        <label for="record_child_first_name"><b>Prénom *</b></label>
                        <br/>
                        <input id="record_child_first_name" type="text" placeholder="Prénom" onchange="" />
                    </div>

                    <div class="form-group col-sm-6">
                        <label for="record_child_last_name"><b>Nom *</b></label>
                        <br/>
                        <input id="record_child_last_name" type="text" placeholder="Nom" onchange="" />
                    </div>
        
                    <div class="form-group col-sm-6">
                        <label for="record_child_dob"><b>Date de naissance *</b></label>
                        <br/>
                        <input id="record_child_dob" type="date" placeholder="Date de naissance" onchange="" />
                    </div>
                    
                    <!-- LIEU DE NAISSANCE -->
                    <div class="form-group col-sm-6">
                        <label for="record_birthplace"><b>Lieu de naissance</b></label>
                        <br/>
                        <input id="record_birthplace" type="text" placeholder="Lieu de naissance" onchange="" />
                    </div>
        
                    <!-- CLASSE -->
                    <div class="form-group col-sm-6">
                        <label for="record_classroom"><b>Classe</b></label>
                        <br/>
                        <select id="record_classroom" placeholder="Classe" onchange="">
                            <option value="UNSET">----</option>
                            <option value="STP">STP</option>
                            <option value="SP">SP</option>
                            <option value="SM">SM</option>
                            <option value="SG">SG</option>
                            <option value="CP">CP</option>
                            <option value="CE1">CE1</option>
                            <option value="CE2">CE2</option>
                            <option value="CM1">CM1</option>
                            <option value="CM2">CM2</option>
                        </select>
                    </div>
        
                    <!-- ECOLE -->
                    <div class="form-group col-sm-6">
                        <label for="record_school"><b>Ecole</b></label>
                        <br/>
                        <select id="record_school" placeholder="Ecole" onchange="">
                            <option value="0">----</option>
                            <option value="9720243G.Presqu'ile">Presqu'ile</option>
                            <option value="9720267E.Saint-Joseph A - Edouard MARCEAU">Saint-Joseph A - Edouard MARCEAU</option>
                            <option value="9720290H.Bois du Parc - Victor SCHOELCHER">Bois du Parc - Victor SCHOELCHER</option>
                            <option value="9720291J.Chapelle - Lise DESIR-CARTESSE">Chapelle - Lise DESIR-CARTESSE</option>
                            <option value="9720292K.Durand - LUC-CAYOL-DURAND">Durand - LUC-CAYOL-DURAND</option>
                            <option value="9720293L.Gondeau - Ambroise PALIX" selected="selected">Gondeau - Ambroise PALIX</option>
                            <option value="9720450G.Morne des Olives">Morne des Olives</option>
                            <option value="9720794F.Saint-Joseph B - Henri MAURICE">Saint-Joseph B - Henri MAURICE</option>
                            <option value="9720289G.Jeanne Merton">Jeanne Merton</option>
                        </select>
                    </div>

                    <!-- GENRE -->
                    <div class="form-group col-sm-6">
                        <label><b>Genre</b></label>
                        <br/>
                        
                        <div class="form-group col-sm-12">
                            <label for="record_gender_m"><b>Masculin</b></label>
                            <input id="record_gender_m" name="record_gender" type="radio" onchange="" />
                        </div>
        
                        <div class="form-group col-sm-12">
                            <label for="record_gender_f"><b>Female</b></label>
                            <input id="record_gender_f" name="record_gender" type="radio" onchange="" />
                        </div>
                    </div>
        
                    <!-- TYPE D'ACCUEIL -->
                    <div class="form-group col-sm-6">
                        <label><b>Type d'accueil</b></label>
                        <br/>
                        
                        <div class="col-sm-12">
                            <input id="record_" type="checkbox" onchange="" />
                            <label for="record_"><b>Matin/Soir</b></label>
                        </div>
                        
                        <div class="col-sm-12">
                            <input id="record_" type="checkbox" onchange="" />
                            <label for="record_"><b>Midi</b></label>
                        </div>
        
                        <div class="col-sm-12">
                            <input id="record_" type="checkbox" onchange="" />
                            <label for="record_"><b>Mercredi</b></label>
                        </div>
        
                        <div class="col-sm-12">
                            <input id="record_" type="checkbox" onchange="" />
                            <label for="record_"><b>Petites et grandes vacances</b></label>
                        </div>
                    </div>
        
                </fieldset>
                
                
                <!-- RESPONSABLES -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Responsables légaux</legend>
                    
                    <div class="form-group col-sm-12">
                        
                        <div class="row">
                            
                            <!-- RESP 1 -->
                            <div class="form-group col-sm-6 row">
                                <b>Responsable légal n°1</b>
        
                                <!-- NOM -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_last_name"><b>Nom</b></label>
                                    <br/>
                                    <input id="record_resp1_last_name" type="text" placeholder="Nom" onchange="" />
                                </div>
        
                                <!-- PRENOM -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_first_name"><b>Prénom</b></label>
                                    <br/>
                                    <input id="record_resp1_first_name" type="text" placeholder="Prénom" onchange="" />
                                </div>
                                
                                <!-- PHONE CELL -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_phone_cell"><b>Téléphone principal</b></label>
                                    <br/>
                                    <input id="record_resp1_phone_cell" type="phone" placeholder="0696 12 34 56" onchange="" />
                                </div>
                                
                                <!-- PHONE HOME -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_phone_home"><b>Téléphone fixe</b></label>
                                    <br/>
                                    <input id="record_resp1_phone_home" type="phone" placeholder="0696 12 34 56" onchange="" />
                                </div>
                                
                                <!-- PHONE PRO -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_phone_pro"><b>Téléphone professionel</b></label>
                                    <br/>
                                    <input id="record_resp1_phone_pro" type="phone" placeholder="0696 12 34 56" onchange="" />
                                </div>
                                
                                <!-- EMAIL -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_email"><b>Email</b></label>
                                    <br/>
                                    <input id="record_resp1_email" type="email" placeholder="mon.email@mail.fr" onchange="" />
                                </div>
                                
                                <!-- ADDRESS L1 -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_address1"><b>Adresse ligne 1</b></label>
                                    <br/>
                                    <input id="record_resp1_address1" type="text" placeholder="Ligne 1" onchange="" />
                                </div>
        
                                <!-- ADDRESS L2 -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp1_address2"><b>Adresse ligne 2</b></label>
                                    <br/>
                                    <input id="record_resp1_address2" type="text" placeholder="Ligne 2" onchange="" />
                                </div>
                                
                                <!-- CITY -->
                                <div class="form-group col-sm-6">
                                    <label for="record_resp1_city"><b>Commune</b></label>
                                    <br/>
                                    <select id="record_resp1_city" placeholder="Commune" onchange="">
                                        <option value="0" default>Commune</option>
                                        <option value="97216">L'Ajoupa-Bouillon</option>
                                        <option value="97217">Les Anses-d'Arlet</option>
                                        <option value="97218">Basse-Pointe</option>
                                        <option value="97222">Bellefontaine</option>
                                        <option value="97221">Le Carbet</option>
                                        <option value="97222">Case-Pilote</option>
                                        <option value="97223">Le Diamant</option>
                                        <option value="97224">Ducos</option>
                                        <option value="97250">Fonds-Saint-Denis</option>
                                        <option value="97200">Fort-de-France</option>
                                        <option value="97240">Le François</option>
                                        <option value="97218">Grand'Rivière</option>
                                        <option value="97213">Gros-Morne</option>
                                        <option value="97232">Le Lamentin</option>
                                        <option value="97214">Le Lorrain</option>
                                        <option value="97218">Macouba</option>
                                        <option value="97225">Le Marigot</option>
                                        <option value="97290">Le Marin</option>
                                        <option value="97260">Le Morne-Rouge</option>
                                        <option value="97226">Le Morne-Vert</option>
                                        <option value="97250">Le Prêcheur</option>
                                        <option value="97211">Rivière-Pilote</option>
                                        <option value="97215">Rivière-Salée</option>
                                        <option value="97231">Le Robert</option>
                                        <option value="97227">Sainte-Anne</option>
                                        <option value="97228">Sainte-Luce</option>
                                        <option value="97230">Sainte-Marie</option>
                                        <option value="97270">Saint-Esprit</option>
                                        <option value="97212">Saint-Joseph</option>
                                        <option value="97250">Saint-Pierre</option>
                                        <option value="97233">Schœlcher</option>
                                        <option value="97220">La Trinité</option>
                                        <option value="97229">Les Trois-Îlets</option>
                                        <option value="97280">Le Vauclin</option>
                                    </select>
                                </div>

                                <!-- ZIP -->
                                <div class="form-group col-sm-6">
                                    <label for="record_resp1_zip"><b>Code postal</b></label>
                                    <br/>
                                    <input id="record_resp1_zip" type="number" placeholder="Code postal" onchange="" disabled />
                                </div>
                            </div>
        
                            <!-- RESP 2 -->
                            <div class="form-group col-sm-6 row">
                                <b>Responsable légal n°2</b>
        
                                <!-- NOM -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_last_name"><b>Nom</b></label>
                                    <br/>
                                    <input id="record_resp2_last_name" type="text" placeholder="Nom" onchange="" />
                                </div>
        
                                <!-- PRENOM -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_first_name"><b>Prénom</b></label>
                                    <br/>
                                    <input id="record_resp2_first_name" type="text" placeholder="Prénom" onchange="" />
                                </div>
                                
                                <!-- PHONE CELL -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_phone_cell"><b>Téléphone principal</b></label>
                                    <br/>
                                    <input id="record_resp2_phone_cell" type="phone" placeholder="0696 12 34 56" onchange="" />
                                </div>
                                
                                <!-- PHONE HOME -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_phone_home"><b>Téléphone fixe</b></label>
                                    <br/>
                                    <input id="record_resp2_phone_home" type="phone" placeholder="0696 12 34 56" onchange="" />
                                </div>
                                
                                <!-- PHONE PRO -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_phone_pro"><b>Téléphone professionel</b></label>
                                    <br/>
                                    <input id="record_resp2_phone_pro" type="phone" placeholder="0696 12 34 56" onchange="" />
                                </div>
                                
                                <!-- EMAIL -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_email"><b>Email</b></label>
                                    <br/>
                                    <input id="record_resp2_email" type="email" placeholder="mon.email@mail.fr" onchange="" />
                                </div>
                                
                                <!-- ADDRESS L1 -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_address1"><b>Adresse ligne 1</b></label>
                                    <br/>
                                    <input id="record_resp2_address1" type="text" placeholder="Ligne 1" onchange="" />
                                </div>
        
                                <!-- ADDRESS L2 -->
                                <div class="form-group col-sm-12">
                                    <label for="record_resp2_address2"><b>Adresse ligne 2</b></label>
                                    <br/>
                                    <input id="record_resp2_address2" type="text" placeholder="Ligne 2" onchange="" />
                                </div>
                                
                                <!-- CITY -->
                                <div class="form-group col-sm-6">
                                    <label for="record_resp2_city"><b>Commune</b></label>
                                    <br/>
                                    <select id="record_resp2_city" placeholder="Commune" onchange="">
                                        <option value="0" default>Commune</option>
                                        <option value="97216">L'Ajoupa-Bouillon</option>
                                        <option value="97217">Les Anses-d'Arlet</option>
                                        <option value="97218">Basse-Pointe</option>
                                        <option value="97222">Bellefontaine</option>
                                        <option value="97221">Le Carbet</option>
                                        <option value="97222">Case-Pilote</option>
                                        <option value="97223">Le Diamant</option>
                                        <option value="97224">Ducos</option>
                                        <option value="97250">Fonds-Saint-Denis</option>
                                        <option value="97200">Fort-de-France</option>
                                        <option value="97240">Le François</option>
                                        <option value="97218">Grand'Rivière</option>
                                        <option value="97213">Gros-Morne</option>
                                        <option value="97232">Le Lamentin</option>
                                        <option value="97214">Le Lorrain</option>
                                        <option value="97218">Macouba</option>
                                        <option value="97225">Le Marigot</option>
                                        <option value="97290">Le Marin</option>
                                        <option value="97260">Le Morne-Rouge</option>
                                        <option value="97226">Le Morne-Vert</option>
                                        <option value="97250">Le Prêcheur</option>
                                        <option value="97211">Rivière-Pilote</option>
                                        <option value="97215">Rivière-Salée</option>
                                        <option value="97231">Le Robert</option>
                                        <option value="97227">Sainte-Anne</option>
                                        <option value="97228">Sainte-Luce</option>
                                        <option value="97230">Sainte-Marie</option>
                                        <option value="97270">Saint-Esprit</option>
                                        <option value="97212">Saint-Joseph</option>
                                        <option value="97250">Saint-Pierre</option>
                                        <option value="97233">Schœlcher</option>
                                        <option value="97220">La Trinité</option>
                                        <option value="97229">Les Trois-Îlets</option>
                                        <option value="97280">Le Vauclin</option>
                                    </select>
                                </div>

                                <!-- ZIP -->
                                <div class="form-group col-sm-6">
                                    <label for="record_resp2_zip"><b>Code postal</b></label>
                                    <br/>
                                    <input id="record_resp2_zip" type="number" placeholder="Code postal" onchange="" disabled />
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                
                
                <!-- RECUPERATEURS -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Autres personnes autorisées à récupérer votre enfant</legend>

                    <div class="form-group col-sm-12">
                        
                        <div class="row">
                            
                            <!-- RECUP. 1 -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Personne n°1</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_recup1_names"><b>Nom et Prénom</b></label>
                                    <input id="record_recup1_names" type="text" placeholder="Nom et Prénom" onchange="" />
                                    <br/>
                                </div>

                                <div class="form-group col-sm-6">
                                    <label for="record_recup1_phones"><b>Téléphones</b></label>
                                    <input id="record_recup1_phones" type="text" placeholder="0696 12 34 56/0696 98 76 54" onchange="" />
                                    <br/>
                                </div>
                            </div>

                            <!-- RECUP. 2 -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Personne n°2</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_recup2_names"><b>Nom et Prénom</b></label>
                                    <input id="record_recup2_names" type="text" placeholder="Nom et Prénom" onchange="" />
                                    <br/>
                                </div>

                                <div class="form-group col-sm-6">
                                    <label for="record_recup2_phones"><b>Téléphones</b></label>
                                    <input id="record_recup2_phones" type="text" placeholder="0696 12 34 56/0696 98 76 54" onchange="" />
                                    <br/>
                                </div>
                            </div>

                            <!-- RECUP. 3 -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Personne n°3</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_recup3_names"><b>Nom et Prénom</b></label>
                                    <input id="record_recup3_names" type="text" placeholder="Nom et Prénom" onchange="" />
                                    <br/>
                                </div>

                                <div class="form-group col-sm-6">
                                    <label for="record_recup3_phones"><b>Téléphones</b></label>
                                    <input id="record_recup3_phones" type="text" placeholder="0696 12 34 56/0696 98 76 54" onchange="" />
                                    <br/>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>


                <!-- AUTORISATIONS -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Autorisations</legend>

                    <div class="form-group col-sm-12">
                        
                        <div class="row">
                            
                            <!-- TRANSPORT -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Autorisation de transport pour raison de santé</b>
                                <span class="Record-Description">J'autorise l'UPEEM à remettre mon enfant aux pompiers et/ou au SAMU, afin d'être transporté d'urgence au centre hospitalier le plus proche, en cas de problèmes de santé ou de blessures jugées graves par la directrice de l'accueil périscolaire.</span>
                                <div class="form-group col-sm-6">
                                    <label for="record_auth_transp_y"><b>Oui</b></label>
                                    <input id="record_auth_transp_y" name="record_auth_transp" type="radio" onchange="" />

                                    <label for="record_auth_transp_n"><b>Non</b></label>
                                    <input id="record_auth_transp_n" name="record_auth_transp" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- IMAGE -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Droit à l'image</b>
                                <span class="Record-Description">J'autorise l'UPEEM à photographier et/ou filmer mon enfant au cours des activités périscolaires et extrascolaires dans un cadre strictement pédagogique. Les photographies ne porteront pas atteinte à sa dignité, à sa vie privée et à sa réputation.</span>
                                <div class="form-group col-sm-6">
                                    <label for="record_auth_image_y"><b>Oui</b></label>
                                    <input id="record_auth_image_y" name="record_auth_image" type="radio" onchange="" />

                                    <label for="record_auth_image_n"><b>Non</b></label>
                                    <input id="record_auth_image_n" name="record_auth_image" type="radio" onchange="" />
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>


                <!-- SANITAIRE -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Fiche sanitaire de liaison</legend>

                    <div class="form-group col-sm-12">
                        
                        <div class="row">
                            
                            <!-- VACCIN -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant est-il à jour de ses vaccins obligatoires ?</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_health_vaccine_y"><b>Oui</b></label>
                                    <input id="record_health_vaccine_y" name="record_health_vaccine" type="radio" onchange="" />

                                    <label for="record_health_vaccine_n"><b>Non</b></label>
                                    <input id="record_health_vaccine_n" name="record_health_vaccine" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- TRAITEMENT MEDICAL -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant suit-il un traitement médical ?</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_health_treatment_y"><b>Oui</b></label>
                                    <input id="record_health_treatment_y" name="record_health_treatment" type="radio" onchange="" />

                                    <label for="record_health_treatment_n"><b>Non</b></label>
                                    <input id="record_health_treatment_n" name="record_health_treatment" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- MALADIES -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant a t'il déjà eu les maladies suivantes ?</b>

                                <div class="col-sm-12">
                                    <label class="col-sm-3">Rubéole</label> 

                                    <label for="record_health_rubeole_y"><b>Oui</b></label>
                                    <input id="record_health_rubeole_y" name="record_health_rubeole" type="radio" onchange="" />
                                    <label for="record_health_rubeole_n"><b>Non</b></label>
                                    <input id="record_health_rubeole_n" name="record_health_rubeole" type="radio" onchange="" />
                                    <br>
                                </div>                                

                                <div class="col-sm-12">
                                    <label class="col-sm-3">Varicelle</label>
                                    
                                    <label for="record_health_varicelle_y"><b>Oui</b></label>
                                    <input id="record_health_varicelle_y" name="record_health_varicelle" type="radio" onchange="" />
                                    <label for="record_health_varicelle_n"><b>Non</b></label>
                                    <input id="record_health_varicelle_n" name="record_health_varicelle" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Angine</label>
                                    
                                    <label for="record_health_angine_y"><b>Oui</b></label>
                                    <input id="record_health_angine_y" name="record_health_angine" type="radio" onchange="" />
                                    <label for="record_health_angine_n"><b>Non</b></label>
                                    <input id="record_health_angine_n" name="record_health_angine" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Rhumatisme articulaire</label>

                                    <label for="record_health_rhumatisme_y"><b>Oui</b></label>
                                    <input id="record_health_rhumatisme_y" name="record_health_rhumatisme" type="radio" onchange="" />
                                    <label for="record_health_rhumatisme_n"><b>Non</b></label>
                                    <input id="record_health_rhumatisme_n" name="record_health_rhumatisme" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Scarlatine</label>

                                    <label for="record_health_scarlatine_y"><b>Oui</b></label>
                                    <input id="record_health_scarlatine_y" name="record_health_scarlatine" type="radio" onchange="" />
                                    <label for="record_health_scarlatine_n"><b>Non</b></label>
                                    <input id="record_health_scarlatine_n" name="record_health_scarlatine" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Coqueluche</label>

                                    <label for="record_health_coqueluche_y"><b>Oui</b></label>
                                    <input id="record_health_coqueluche_y" name="record_health_coqueluche" type="radio" onchange="" />
                                    <label for="record_health_coqueluche_n"><b>Non</b></label>
                                    <input id="record_health_coqueluche_n" name="record_health_coqueluche" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Otite</label>

                                    <label for="record_health_otite_y"><b>Oui</b></label>
                                    <input id="record_health_otite_y" name="record_health_otite" type="radio" onchange="" />
                                    <label for="record_health_otite_n"><b>Non</b></label>
                                    <input id="record_health_otite_n" name="record_health_otite" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Rougeole</label>

                                    <label for="record_health_rougeole_y"><b>Oui</b></label>
                                    <input id="record_health_rougeole_y" name="record_health_rougeole" type="radio" onchange="" />
                                    <label for="record_health_rougeole_n"><b>Non</b></label>
                                    <input id="record_health_rougeole_n" name="record_health_rougeole" type="radio" onchange="" />
                                    <br>
                                </div>
                                
                                <div class="col-sm-12">
                                    <label class="col-sm-3">Oreillons</label>

                                    <label for="record_health_oreillons_y"><b>Oui</b></label>
                                    <input id="record_health_oreillons_y" name="record_health_oreillons" type="radio" onchange="" />
                                    <label for="record_health_oreillons_n"><b>Non</b></label>
                                    <input id="record_health_oreillons_n" name="record_health_oreillons" type="radio" onchange="" />
                                    <br>
                                </div>
                            </div>

                            <!-- ASTHME -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant est-il asthmatique ?</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_health_asthme_y"><b>Oui</b></label>
                                    <input id="record_health_asthme_y" name="record_health_asthme" type="radio" onchange="" />

                                    <label for="record_health_asthme_n"><b>Non</b></label>
                                    <input id="record_health_asthme_n" name="record_health_asthme" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- ALLERGY DRUG -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant fait-il des allergies à certains médicaments ?</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_drug_y"><b>Oui</b></label>
                                    <input id="record_health_drug_y" name="record_health_drug" type="radio" onchange="" />

                                    <label for="record_health_drug_n"><b>Non</b></label>
                                    <input id="record_health_drug_n" name="record_health_drug" type="radio" onchange="" />
                                </div>

                                <div class="form-group col-sm-12">
                                    <label for="record_health_drug_details"><b>Si oui, merci de préciser :</b></label>
                                    <input id="record_health_drug_details" type="text" onchange="" />
                                </div>
                            </div>

                            <!-- ALLERGY FOOD -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant est-il allergique à certains aliments ?</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_food_y"><b>Oui</b></label>
                                    <input id="record_health_food_y" name="record_health_food" type="radio" onchange="" />

                                    <label for="record_health_food_n"><b>Non</b></label>
                                    <input id="record_health_food_n" name="record_health_food" type="radio" onchange="" />
                                </div>

                                <div class="form-group col-sm-12">
                                    <label for="record_health_food_details"><b>Si oui, merci de préciser les aliments auxquels il est allergique :</b></label>
                                    <input id="record_health_food_details" type="text" onchange="" />
                                </div>
                            </div>

                            <!-- MEDECIN -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Médecin traitant</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_health_doctor_names"><b>Nom du médecin traitant de votre enfant :</b></label>
                                    <input id="record_health_doctor_names" type="text" onchange="" />
                                </div>

                                <div class="form-group col-sm-6">
                                    <label for="record_health_doctors_phones"><b>Tél du médecin traitant de votre enfant :</b></label>
                                    <input id="record_health_doctors_phones" type="text" onchange="" />
                                </div>
                            </div>

                            <!-- PAI -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant fait-il l'objet d'un Projet d'Accueil Individualisé ? (PAI)</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_pai_y"><b>Oui</b></label>
                                    <input id="record_health_pai_y" name="record_health_pai" type="radio" onchange="" />

                                    <label for="record_health_pai_n"><b>Non</b></label>
                                    <input id="record_health_pai_n" name="record_health_pai" type="radio" onchange="" />

                                    <label for="record_health_pai_ongoing"><b>En cours d'élaboration</b></label>
                                    <input id="record_health_pai_ongoing" name="record_health_pai" type="radio" onchange="" />
                                </div>

                                <div class="form-group col-sm-12">
                                    <label for="record_health_pai_details"><b>Merci d'indiquer ci-dessous ses spécificités (maladie, accident, crises convulsives, hospitalisation, opération, rééducation) en précisant les précautions à prendre.</b></label>
                                    <input id="record_health_pai_details" type="text" onchange="" />
                                </div>
                            </div>

                            <!-- LENTILLES -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant porte t'il des lentilles ?</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_lentilles_y"><b>Oui</b></label>
                                    <input id="record_health_lentilles_y" name="record_health_lentilles" type="radio" onchange="" />

                                    <label for="record_health_lentilles_n"><b>Non</b></label>
                                    <input id="record_health_lentilles_n" name="record_health_lentilles" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- LUNETTES -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant porte t'il des lunettes ?</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_glass_y"><b>Oui</b></label>
                                    <input id="record_health_glass_y" name="record_health_glass" type="radio" onchange="" />

                                    <label for="record_health_glass_n"><b>Non</b></label>
                                    <input id="record_health_glass_n" name="record_health_glass" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- AUDIO -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant porte t'il des prothèses auditives ?</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_audio_y"><b>Oui</b></label>
                                    <input id="record_health_audio_y" name="record_health_audio" type="radio" onchange="" />

                                    <label for="record_health_audio_n"><b>Non</b></label>
                                    <input id="record_health_audio_n" name="record_health_audio" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- DENTS -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Votre enfant porte t'il des prothèses ou autres appareils dentaires ?</b>
                                <div class="form-group col-sm-12">
                                    <label for="record_health_tooth_y"><b>Oui</b></label>
                                    <input id="record_health_tooth_y" name="record_health_tooth" type="radio" onchange="" />

                                    <label for="record_health_tooth_n"><b>Non</b></label>
                                    <input id="record_health_tooth_n" name="record_health_tooth" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- AUTRES -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Autres recommandations (qualité de peau, crème solaire)</b>
                                <div class="form-group col-sm-12">
                                    <input id="record_health_others" type="text" onchange="" />
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>

                
                <!-- AUTORISATIONS ALSH -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Autorisations centre de loisirs</legend>

                    <div class="form-group col-sm-12">
                        
                        <div class="row">
                            
                            <!-- SPORT -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">J'autorise mon enfant à participer aux activités physiques et sportives :</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_auth_sport_y"><b>Oui</b></label>
                                    <input id="record_auth_sport_y" name="record_auth_sport" type="radio" onchange="" />

                                    <label for="record_auth_sport_n"><b>Non</b></label>
                                    <input id="record_auth_sport_n" name="record_auth_sport" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- BAIGNADE -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">J'autorise mon enfant à participer aux baignades surveillées :</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_auth_bath_y"><b>Oui</b></label>
                                    <input id="record_auth_bath_y" name="record_auth_bath" type="radio" onchange="" />

                                    <label for="record_auth_bath_n"><b>Non</b></label>
                                    <input id="record_auth_bath_n" name="record_auth_bath" type="radio" onchange="" />
                                </div>
                            </div>

                            <!-- TRANSPORT -->
                            <div class="form-group col-sm-12 row">
                                <b class="col-sm-12">Autorisation de transport en véhicule de service et car de location :</b>
                                <div class="form-group col-sm-6">
                                    <label for="record_auth_transpbus_y"><b>Oui</b></label>
                                    <input id="record_auth_transpbus_y" name="record_auth_transpbus" type="radio" onchange="" />

                                    <label for="record_auth_transpbus_n"><b>Non</b></label>
                                    <input id="record_auth_transpbus_n" name="record_auth_transpbus" type="radio" onchange="" />
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>

                
                <!-- END -->
                <fieldset class="col-sm-12 d-non">
                    <legend>Formalisation de l'inscription de votre enfant</legend>

                    <div class="form-group col-sm-12">
                        
                        <p class="Record-Agreement">
                            Parent,
                            <br/>
                            <br/>

                            Afin de valider l'inscription de votre enfant, merci de nous fournir à compter du 19 août 2019 à l'adresse indiquée ci-dessous, la totalité des pièces suivantes :
                            <br/>

                            <ul>
                                <li>Une photo récente de l'enfant / ou deux en cas d'inscription au centre de loisirs</li>
                                <li>Une attestation d'assurance extrascolaire (24/24+)</li>
                                <li>La photocopie des pages de vaccination du carnet de santé</li>
                                <li>Un certificat médical (uniquement pour les inscriptions au centre de loisirs)</li>
                                <li>Si inscription en garderie : le montant du forfait mensuel (en espèces ou par chèque)</li>
                                <li>Si votre enfant fait l'objet d'un Projet d'Accueil Individualisé (PAI) : une copie du PAI</li>
                            </ul>
                            
                            <b class="text-danger">Aucun dossier incomplet ne sera accepté.</b>
                            <br />

                            <!-- Pour plus d'informations, veuillez consulter notre site internet http://www.upem.mq -->
                            <!-- <br/> -->

                            Merci de votre collaboration.

                            <b>Paiement et la remise des pièces à UPEEM Saint-Joseph (Rue Blondet - n°5 impasse LAMOTTE - 97212 Saint-Joseph)</b>
                        </p>

                        <div class="row">
                            
                            <!-- SPORT -->
                            <div class="col-sm-12 row d-flex align-items-center">
                                <input id="record_agreement" class="col-sm-1" type="checkbox" onchange="" />
                                <label for="record_agreement" class="col-sm-11"><b>En soumettant ce formulaire, j'accepte que les informations saisies soient exploitées dans le cadre de la demande d'inscription et de la relation commerciale qui peut en découler.</b></label>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>

    <div id="User-wrapper" class="wrapper">
        <div class="wrapper-title">
            <p class="title">Profile</p>
        </div>
        <div class="wrapper-content">
            <div class="row">

                <div class="col-sm-8">

                    <div class="Profile">

                        <div class="Profile-wrapper">
                            
                            <div id="Profile-status" class="form-status col-sm-12">
                                <div class="form-alert alert alert-danger" role="alert"></div>
                                <div class="form-alert alert alert-success" role="alert"></div>
                            </div>
                            
                            <fieldset class="Profile-base col-sm-12">
                                <legend>Informations</legend>

                                <div class="row">

                                    <div class="form-group col-sm-6">
                                        <label for="user_first_name"><b>Prénom *</b></label>
                                        <br />
                                        <input id="user_first_name" type="text" placeholder="Prénom"
                                            onchange="profile_onChange(this)" />
                                    </div>
        
                                    <div class="form-group col-sm-6">
                                        <label for="user_last_name"><b>Nom *</b></label>
                                        <br />
                                        <input id="user_last_name" type="text" placeholder="Nom"
                                            onchange="profile_onChange(this)" />
                                    </div>
        
                                    <div class="form-group col-sm-6">
                                        <label for="user_dob"><b>Date de naissance *</b></label>
                                        <br />
                                        <input id="user_dob" type="date" placeholder="Date de naissance"
                                            onchange="profile_onChange(this)" />
                                    </div>

                                    <div class="form-group col-sm-6">
                                        <label for="user_job"><b>Profession</b></label>
                                        <input id="user_job" type="text" onchange="profile_onChange(this)" />
                                    </div>

                                    <div class="form-group col-sm-6">
                                        <label for="user_birthplace"><b>Lieu de naissance</b></label>
                                        <input id="user_birthplace" type="text" onchange="profile_onChange(this)" />
                                    </div>

                                    <div class="form-group col-sm-6 ">
                                        <label><b>Genre</b></label>
                                        <br/>
                                        
                                        <label for="user_gender_m"><b>Masculin</b></label>
                                        <input id="user_gender_m" name="user_gender" type="radio" onchange="profile_onChange(this)" />

                                        <label for="user_gender_f"><b>Feminin</b></label>
                                        <input id="user_gender_f" name="user_gender" type="radio" onchange="profile_onChange(this)" />
                                    </div>
        
                                    <div class="form-group col-sm-6">
                                        <label for="user_email"><b>Email *</b></label>
                                        <br />
                                        <input id="user_email" type="email" placeholder="mon.email@mail.fr"
                                            onchange="profile_onChange(this)" />
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="Profile-phones col-sm-12">
                                <legend>Téléphones</legend>
                            
                                <div class="row">
                            
                                    <div class="form-group col-sm-6">
                                        <label for="user_phone_cell"><b>Téléphone portable *</b></label>
                                        <br />
                                        <input id="user_phone_cell" type="phone" placeholder="0696 12 34 56" onchange="profile_onChange(this)" />
                                    </div>

                                    <div class="form-group col-sm-6">
                                        <label for="user_phone_home"><b>Téléphone fixe</b></label>
                                        <br />
                                        <input id="user_phone_home" type="phone" placeholder="0696 12 34 56" onchange="profile_onChange(this)" />
                                    </div>

                                    <div class="form-group col-sm-6">
                                        <label for="user_phone_pro"><b>Téléphone professionnel</b></label>
                                        <br />
                                        <input id="user_phone_pro" type="phone" placeholder="0696 12 34 56" onchange="profile_onChange(this)" />
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="Profile-address col-sm-12">
                                <legend>Adresse</legend>
                            
                                <div class="row">

                                    <div class="form-group col-sm-12">
                                        <label for="user_address1"><b>Ligne 1 *</b></label>
                                        <br />
                                        <input id="user_address1" type="text" placeholder="Ligne 1"
                                            onchange="profile_onChange(this)" />
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label for="user_address2"><b>Ligne 2</b></label>
                                        <br />
                                        <input id="user_address2" type="text" placeholder="Ligne 2"
                                            onchange="profile_onChange(this)" />
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="user_city"><b>Commune *</b></label>
                                        <br />
                                        <select id="user_city" placeholder="Commune" onchange="city_onChange(this)">
                                            <option value="0" default>Commune</option>
                                            <option value="97216">L'Ajoupa-Bouillon</option>
                                            <option value="97217">Les Anses-d'Arlet</option>
                                            <option value="97218">Basse-Pointe</option>
                                            <option value="97222">Bellefontaine</option>
                                            <option value="97221">Le Carbet</option>
                                            <option value="97222">Case-Pilote</option>
                                            <option value="97223">Le Diamant</option>
                                            <option value="97224">Ducos</option>
                                            <option value="97250">Fonds-Saint-Denis</option>
                                            <option value="97200">Fort-de-France</option>
                                            <option value="97240">Le François</option>
                                            <option value="97218">Grand'Rivière</option>
                                            <option value="97213">Gros-Morne</option>
                                            <option value="97232">Le Lamentin</option>
                                            <option value="97214">Le Lorrain</option>
                                            <option value="97218">Macouba</option>
                                            <option value="97225">Le Marigot</option>
                                            <option value="97290">Le Marin</option>
                                            <option value="97260">Le Morne-Rouge</option>
                                            <option value="97226">Le Morne-Vert</option>
                                            <option value="97250">Le Prêcheur</option>
                                            <option value="97211">Rivière-Pilote</option>
                                            <option value="97215">Rivière-Salée</option>
                                            <option value="97231">Le Robert</option>
                                            <option value="97227">Sainte-Anne</option>
                                            <option value="97228">Sainte-Luce</option>
                                            <option value="97230">Sainte-Marie</option>
                                            <option value="97270">Saint-Esprit</option>
                                            <option value="97212">Saint-Joseph</option>
                                            <option value="97250">Saint-Pierre</option>
                                            <option value="97233">Schœlcher</option>
                                            <option value="97220">La Trinité</option>
                                            <option value="97229">Les Trois-Îlets</option>
                                            <option value="97280">Le Vauclin</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="user_zip_code"><b>Code postal</b></label>
                                        <br />
                                        <input id="user_zip_code" type="number" placeholder="Code postal"
                                            onchange="profile_onChange(this)" disabled />
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="Profile-additional col-sm-12">
                                <legend>Newsletters</legend>
                            
                                <div class="row">

                                    <div class="form-group col-sm-12">
                                        <label for="user_accept_newsletter"><b></b></label>
                                        <input id="user_accept_newsletter" type="checkbox" onchange="profile_onChange(this)" />
                                    </div>
                                </div>
                            </fieldset>

                            <div class="form-group col-sm-12 text-right">
                                <button id="Profile-Update" class="button button-blue" onclick="update()">Mettre à jour</button>
                            </div>

                        </div>

                    </div>
                </div>

                <div class="col-sm-4">

                    <div class="IntelCard">
                        <div class="IntelCard-wrapper col-sm-12">
                            <legend>Informations famille</legend>

                            <div class="IntelCard-card">
                                <b>Pas d'inscription pour cette année</b>
                                <hr />

                                <div class="Intel-no_data">
                                    <span><i>Pas de données pour cette année</i></span>
                                </div>

                                <div class="Intel-data" style="display: none;">
                                    <div class="col-sm-12">
                                        <b>Quotient <span class="intel_s"></span>: </b>
                                        <span class="intel_q1"></span>
                                        <br />

                                        <b>Quotient <span class="intel_e"></span>: </b>
                                        <span class="intel_q2"></span>
                                        <br />

                                        <b>CAF: </b><span class="intel_rn"></span>
                                        <br />

                                        <b>Numéro de police: </b><span class="intel_ip"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group col-sm-12 text-right">
                                <button id="IntelCard-Add" class="button button-cyan" onclick="openModal('IntelsModal')">Ajouter</button>
                                <button id="IntelCard-Update" class="button button-blue" onclick="openModal('IntelsModal')">Modifier</button>
                                <button id="IntelCard-History" class="button button-dark"
                                    onclick="openModal('IntelsModal')">Historique</button>
                            </div>
                        </div>
                    </div>

                    <div class="Family">
                        <div class="Family-wrapper col-sm-12">
                            <legend>Ma famille</legend>
                            <b>Enfant(s) lié(s)</b>

                            <!-- <a class="Family-card success" href="#">
                                <b>
                                    <span class="Card_name">Enfant 1</span> -
                                    <span class="Card_register text-success">Inscrit</span>
                                    <span class="Card_register text-danger">Non inscrit</span>
                                </b>
                                <span class="Card_record">CM2 - HM</span>
                            </a>

                            <a class="Family-card danger" href="#">
                                <b>
                                    <span class="Card_name">Enfant 2</span> -
                                    <span class="Card_register text-success">Inscrit</span>
                                    <span class="Card_register text-danger">Non inscrit</span>
                                </b>
                                <span class="Card_record">CM2 - HM</span>
                            </a>

                            <a class="Family-card add">
                                <b>
                                    <i class="fa fa-plus text-success" aria-hidden="true"></i>
                                    Ajouter enfant
                                </b>
                            </a> -->
                        </div>
                    </div>
                </div>

            </div>
        </div>
        
        <div id="Records-wrapper"></div>
    </div>


</div>
{% endblock %}

{% block body_extensions %}

<!-- Modal -->
<div class="modal fade" id="ChildModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ajouter un enfant</h5>
                <button type="button" class="close" data-dismiss="modal" onclick="closeModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="AddChild">
                    <form class="wrapper">
                        <div id="AddChild-status" class="form-status col-sm-12">
                            <div class="form-alert alert alert-danger" role="alert"></div>
                            <div class="form-alert alert alert-success" role="alert"></div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label for="child_first_name"><b>Prénom *</b></label>
                            <br />
                            <input id="child_first_name" type="text" placeholder="Prénom"
                                onchange="children_listenInputs(this)" />
                        </div>

                        <div class="form-group col-sm-12">
                            <label for="child_last_name"><b>Nom *</b></label>
                            <br />
                            <input id="child_last_name" type="text" placeholder="Nom"
                                onchange="children_listenInputs(this)" />
                        </div>

                        <div class="form-group col-sm-12">
                            <label for="child_dob"><b>Date de naissance *</b></label>
                            <br />
                            <input id="child_dob" type="date" placeholder="Date de naissance"
                                onchange="children_listenInputs(this)" />
                        </div>
                    </form>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="button button-cyan" onclick="createChild()">Ajouter</button>
                <button type="button" class="button button-dark" data-dismiss="modal" onclick="closeModal()">Fermer</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="IntelsModal" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Mon historique famille</h5>
                <button type="button" class="close" data-dismiss="modal" onclick="closeModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body Intels-History">

                <div id="IntelsModal-status" class="form-status">
                    <div class="form-alert alert alert-danger" role="alert"></div>
                    <div class="form-alert alert alert-success" role="alert"></div>
                </div>

                <div class="active">
                    <b>Pas d'inscription pour cette année</b>
                </div>

                <div class="list"></div>

                <div class="template" style="display: none;">
                    <div class="History-card">
                        <b class="card-title">2019 - 2020</b>
                        <hr />

                        <div class="History-no_data">
                            <span><i>Pas de données pour cette année</i></span>
                        </div>

                        <div class="History-form">
                            <div class="form-group col-sm-6">
                                <label for="intel_q1"><b>Quotient <span class="intel_s"></span></b></label>
                                <br />
                                <select id="intel_q1" placeholder="Quotient" onchange="">
                                    <option value="0" default>-----</option>
                                    <option value="1">NE</option>
                                    <option value="2">Q2</option>
                                    <option value="3">Q1</option>
                                </select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="intel_q2"><b>Quotient <span class="intel_e"></span></b></label>
                                <br />
                                <select id="intel_q2" placeholder="Quotient" onchange="">
                                    <option value="0" default>-----</option>
                                    <option value="1">NE</option>
                                    <option value="2">Q2</option>
                                    <option value="3">Q1</option>
                                </select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="intel_rn"><b>Numéro CAF</b></label>
                                <br />
                                <input id="intel_rn" type="text" placeholder="Numéro CAF"
                                    onchange="profile_onChange(this)" />
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="intel_ip"><b>Police d'assurance</b></label>
                                <br />
                                <input id="intel_ip" type="text" placeholder="Police d'assurance"
                                    onchange="profile_onChange(this)" />
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="intels_update()">Mettre à jour</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal"
                    onclick="closeModal()">Fermer</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/scripts/User.js"></script>
<script>
    let error = false;
    let isAdmin = false;
    let isChild = false;

    let userSibling = {};
    let userProfile = {};
    let userRecords = {};
    let schoolYears = undefined;
    
    // const user_id = {% if pk %} { { pk } } {% else %} 0 {% endif %};
    // const parent_id = {% if pk %} { { pk } } {% else %} 0 {% endif %};
    
    let user_id = 29;
    let parent_id = 20;
    
    // index - SchoolYear
    const childAdded = new User();
    const intelsAdded = {};
    
    const userHelper = new User();
    const intelsHelper = new Intels(parent_id);
    const siblingHelper = new Sibling();

    const recordHelper = new Record();
    const recordsHelper = new Records();

    const USERINPUTS = {
        'user_first_name': document.getElementById('user_first_name'),
        'user_last_name': document.getElementById('user_last_name'),
        'user_dob': document.getElementById('user_dob'),
        'user_job': document.getElementById('user_job'),
        'user_birthplace': document.getElementById('user_birthplace'),
        'user_phone_cell': document.getElementById('user_phone_cell'),
        'user_phone_home': document.getElementById('user_phone_home'),
        'user_phone_pro': document.getElementById('user_phone_pro'),
        'user_email': document.getElementById('user_email'),
        'user_address1': document.getElementById('user_address1'),
        'user_address2': document.getElementById('user_address2'),
        'user_city': document.getElementById('user_city'),
        'user_zip_code': document.getElementById('user_zip_code'),
        'user_accept_newsletter': document.getElementById('user_accept_newsletter'),

        label: function (key) { return document.querySelector(`label[for="${key}"]`); },
        // input: function (key) { return document.getElementById(this[key]); },
        hide: function (key) { this[key].parentElement.style = 'display:none'; },
    };


    window.onload = function (e) {
        App.init();
        App.SchoolYears();
        // Login.init();

        schoolYears = App._SchoolYears_unordered;

        if (!user_id) {
            statusDanger('User ID non défini.');
            return false;
        }

        // TODO
        // Check App Schoolyears
        if (!schoolYears.length) {
            statusDanger('Echec lors de la récupération des années scolaires.');
            return false
        }

        return run();
    }


    function statusDanger(message) {
        const base = document.getElementById('User-status');

        base.querySelectorAll('.form-alert').forEach(item => { item.classList.remove('show'); });

        const _ = base.querySelector('.form-alert.alert-danger');
        _.innerHTML = message;
        _.classList.add('show');
    }


    function statusSuccess(message) {
        const base = document.getElementById('User-status');

        base.querySelectorAll('.form-alert').forEach(item => { item.classList.remove('show'); });

        const _ = base.querySelector('.form-alert.alert-success');
        _.innerHTML = message;
        _.classList.add('show');
    }
    

    function run () {
        userHelper.readUser(
            user_id,
            readUser_onSuccess,
            readUser_onFailure
        );

        return true;
    }


    function readUser_onSuccess(data) {
        userProfile = data.user;

        // Check role
        error = true;
        // Parent
        if (userProfile.roles) {
            for (const role of userProfile.roles) {
                if (role.slug === 'child')
                    isChild = true;
            }
            error = false;
        }
        // Caster
        if (App.caster.roles) {
            for (const role of App.caster.roles) {
                if (role.slug === 'admin')
                    isAdmin = true;
            }
            error = false;
        }

        if (error) {
            //
        }

        // Read Sibling
        if (isChild) {
            siblingHelper.readByChild(
                user_id,
                readSibling_onSuccess,
                readSibling_onFailure
            );

            recordsHelper.readByChild(
                user_id,
                readRecords_onSuccess,
                readRecords_onFailure
            );
        }

        else
            siblingHelper.readByParent(
                user_id,
                readSibling_onSuccess,
                readSibling_onFailure
            );


        const r = renderProfile();

        // renderIntels
        // renderFamily
        // render parent 1
        // render parent 2
        // render siblings

        // intelsHelper.readByParent(
        //     parent_id,
        //     (data) => { 
        //         console.log(data); 
        //         renderIntels();
        //     },
        //     (err) => { 
        //         console.log(err);
        //         profile_statusDanger (err);
        //         renderIntels ([]);
        //     }
        // );
    }


    function readUser_onFailure(err) {
        console.log(err);
        let message = 'Une erreur est survenue.';
        if (err.erreur) {
            message = err.erreur;
        }
        else if (err.message) {
            message = err.message;
        }
        profile_statusDanger(message);
    }


    function readSibling_onSuccess(data) {
        userSibling = data.sibling;
        parent_id = data.sibling.parent;
        childAdded.parent = data.sibling.parent;

        renderIntels();
        renderChildren();
    }


    function readSibling_onFailure(err) {
        console.log(err);

        profile_statusDanger(err);
    }


    function readRecords_onSuccess(data) {
        userRecords = data.records;

        renderRecords();
    }


    function readRecords_onFailure(err) {
        console.log(err);

        profile_statusDanger(err);
    }


    /*****************************************************************************
    *  USER - PROFILE
    *****************************************************************************/

    function renderProfile() {
        // Update document title
        document.title = userProfile.last_name + ' ' + userProfile.first_name;

        const userWrapper = document.getElementById('User-wrapper');

        // Set user wrapper title
        userWrapper.querySelector('.title').innerHTML = userProfile.last_name + ' ' + userProfile.first_name;

        // Set imcomplete data status
        if (!userProfile.data_completed) {
            profile_statusDanger('Attention, vos informations sont incomplètes. Veuillez les compléter.');
        }

        // Setup user form
        if (!isChild)
            formUser(userProfile);

        else
            formChild(userProfile);
    }


    function profile_statusDanger(message) {
        const base = document.getElementById('Profile-status');

        base.querySelectorAll('.form-alert').forEach(item => { item.classList.remove('show'); });

        const _ = base.querySelector('.form-alert.alert-danger');
        _.innerHTML = message;
        _.classList.add('show');
    }


    /**
     *  Update form a normal user
     */
    function formUser(user) {
        try {

            USERINPUTS['user_first_name'].value = user.first_name;
            USERINPUTS['user_last_name'].value = user.last_name;

            USERINPUTS['user_job'].value = user.job;
            USERINPUTS['user_dob'].value = user.dob;
            USERINPUTS['user_email'].value = user.email;

            if (user.gender === 1)
                document.getElementById('user_gender_m').checked = true;
            else if (user.gender === 2)
                document.getElementById('user_gender_f').checked = true;

            USERINPUTS.hide('user_birthplace');

            if (user.phones) {
                USERINPUTS['user_phone_cell'].value = user.phones.cell;
                USERINPUTS['user_phone_home'].value = user.phones.home;
                USERINPUTS['user_phone_pro'].value = user.phones.pro;
            } 

            if (user.address) {
                USERINPUTS['user_address1'].value = user.address.address1;
                USERINPUTS['user_address2'].value = user.address.address2;

                USERINPUTS['user_city'].value = user.address.zip_code;
                USERINPUTS['user_zip_code'].value = user.address.zip_code;
            }
        }
        catch (error) {
            console.log('An error occured in formUser() with message: ' + error);
        }
    }


    /**
     *  Update form a normal user
     */
    function formChild(user) {
        try {
            USERINPUTS['user_first_name'].value = user.first_name;
            USERINPUTS['user_last_name'].value = user.last_name;

            USERINPUTS['user_dob'].value = user.dob;
            USERINPUTS['user_birthplace'].value = user.birthplace;

            // USERINPUTS.hide('user_email');

            // USERINPUTS.hide('user_phone_cell');
            // USERINPUTS.hide('user_phone_home');
            // USERINPUTS.hide('user_phone_pro');

            // USERINPUTS.hide('user_address1');
            // USERINPUTS.hide('user_address2');

            // USERINPUTS.hide('user_city');
            // USERINPUTS.hide('user_zip_code');

            USERINPUTS.hide('user_job');
            USERINPUTS.hide('user_gender_m');

            document.querySelector('.Profile-Phones').style = 'display:none';
            document.querySelector('.Profile-Address').style = 'display:none';
            document.querySelector('.Profile-additional').style = 'display:none';
        }
        catch (error) {
            console.log('An error occured in formChild() with message: ' + error);
        }
    }


    function inputDanger(id) {
        document.getElementById(id).classList.add('error');
    }


    function inputNeutral(id) {
        document.getElementById(id).classList.remove('error');
    }


    function profile_onChange(e) {
        let value = e.value;
        if (e.type === 'checkbox')
            value = e.checked;
        const result = userHelper.validate(e.id, value);
        console.log(result);

        if (!result.status) {
            inputDanger(e.id);
            profile_statusDanger(result.message);
        }
        else {
            inputNeutral(e.id);
        }
    }


    function city_onChange(e) {
        profile_onChange(e);
        if (e.value !== '0') {
            document.getElementById('user_zip_code').value = e.value;
        }
    }


    function update() {
        const r = userHelper.updateUser(
            update_onSuccess,
            update_onFailure
        );

        if (typeof (r) === 'string')
            profile_statusDanger(r);
    }


    function update_onSuccess(data) {
        profile_statusSuccess('Informations enregistrées.');
    }


    function update_onFailure(err) {
        if (err.includes('Values can')) {
            profile_statusDanger('Erreur, informations incomplètes.');
        }
    }

    /*****************************************************************************
     *  INTELS
     *****************************************************************************/

    /** 
     *  renderIntels
     *      Update Intel card
     *      Add school years to History
     *      Update History with Intels
     *      Update card buttons
     */
    function renderIntels() {
        const card = document.querySelector('.IntelCard');
        const history = document.querySelector('.Intels-History');

        // Render active School Year
        for (const sy of schoolYears) {
            const s = sy.date_start.split('-')[0];
            const e = sy.date_end.split('-')[0];

            if (sy.is_active) {

                // Add years to html
                //
                // Card

                card.querySelector('.IntelCard-card b').innerHTML = `${s} - ${e}`;

                card.querySelector('.intel_s').innerHTML = s;
                card.querySelector('.intel_e').innerHTML = e;

                history.querySelector('.active').innerHTML = siblingHelper.render(sy, isAdmin);
            }

            // Only History
            else {
                history.querySelector('.list').innerHTML += siblingHelper.render(sy, isAdmin);
            }

            // Sanity
            // console.log(`${s} - ${e}`);
        }

        const Q = [
            '-',
            'NE',
            'Q2',
            'Q1'
        ];

        // Intels
        const set_disable = (block, selector, value) => {
            const _ = block.querySelector(selector);
            _.value = value;
            _.disabled = (isAdmin) ? false : true;
        };

        for (const intel of Object.values(siblingHelper.intels())) {

            const block = history.querySelector(`.History-card[data-school="${intel.school_year}"]`);

            if (!block) {
                console.log('Could not find a school year card for intel: ' + intel.id);
                continue;
            }

            // Mark history card
            block.setAttribute('data-intel', intel.id);

            if (intel.is_active) {
                // Update card
                card.querySelector('.Intel-data').style = 'display: inherit';
                card.querySelector('.Intel-no_data').style = 'display: none';

                card.querySelector('.intel_q1').innerHTML = Q[intel.quotient_1];
                card.querySelector('.intel_q2').innerHTML = Q[intel.quotient_2];
                card.querySelector('.intel_rn').innerHTML = intel.recipent_number;
                card.querySelector('.intel_ip').innerHTML = intel.insurance_policy;

                block.querySelector('input[name="intel_rn"]').value = intel.recipent_number;
                block.querySelector('input[name="intel_ip"]').value = intel.insurance_policy;
            }
            else {

                set_disable(block, 'input[name="intel_rn"]', intel.recipent_number);
                set_disable(block, 'input[name="intel_ip"]', intel.insurance_policy);
            }

            block.querySelector('.History-form').style = 'display: flex';
            block.querySelector('.History-no_data').style = 'display: none';

            set_disable(block, 'select[name="intel_q1"]', intel.quotient_1);
            set_disable(block, 'select[name="intel_q2"]', intel.quotient_2);

        }

        // Buttons
        if (siblingHelper.has_active_intel)
            document.getElementById('IntelCard-Add').style = 'display: none';
        else
            document.getElementById('IntelCard-Update').style = 'display: none';

        // Inputs
        document.querySelectorAll('.History-card').forEach((card) => {
            const sy = card.getAttribute('data-school');
            const intel = card.getAttribute('data-intel');

            card.querySelectorAll('input').forEach(input => {
                input.addEventListener('change', () => intels_listenInputs(input, sy, intel));
            });

            card.querySelectorAll('select').forEach(input => {
                input.addEventListener('change', () => intels_listenInputs(input, sy, intel));
            });
        });


    }


    function intels_listenInputs(e, sy_id, intel_id) {
        console.log('intels_listenInputs');
        console.log(e);
        console.log(sy_id);
        console.log(intel_id);

        if (!sy_id) {
            console.log('intels_listenInputs() => Error with input: ' + e);
            return false;
        }

        let intel = null;

        if (!intel_id) {
            if (!intelsAdded[sy_id]) {
                intelsAdded[sy_id] = new Intel(parent_id);
                intelsAdded[sy_id].school_year = sy_id
            }

            intel = intelsAdded[sy_id];
        }
        else {
            intel = siblingHelper.intel(intel_id);

            if (!intel) {
                console.log('intels_listenInputs() => Failed to get intel with ID: ' + intel_id);
                return false;
            }
        }

        // Data validation

        const value = e.value;

        switch (e.localName) {
            case 'input':
                // No values should exceed 20 chars
                if (value.length > 19) {
                    inputDanger(e.id);
                    intels_statusDanger('Ce champ contient trop de caractères (20 max.).');
                    return false;
                }
                break;

            case 'select':
                const _ = parseInt(value);
                if (!_) {
                    inputDanger(e.id);
                    intels_statusDanger('Veuillez sélectionner un quotient valide.');
                    return false;
                }
                if (_ < 0 || _ > 3) {
                    inputDanger(e.id);
                    intels_statusDanger('Veuillez sélectionner un quotient parmi ceux proposés.');
                    return false;
                }
                break;
        }

        switch (e.name) {
            case 'intel_q1':
                intel.quotient_1 = parseInt(value);
                break;

            case 'intel_q2':
                intel.quotient_2 = parseInt(value);
                break;

            case 'intel_rn':
                intel.recipent_number = value;
                break;

            case 'intel_ip':
                intel.insurance_policy = value;
                break;
        }
        intel.has_changed = true;
    }


    function intels_update() {
        document.querySelectorAll('.History-card').forEach((card) => {
            const sy = card.getAttribute('data-school');
            const intel = card.getAttribute('data-intel');

            if (intelsAdded[sy])
                intelsAdded[sy].create(
                    intels_create_onSuccess,
                    intels_create_onFailure
                );

            if (siblingHelper.intel(intel))
                siblingHelper.intel(intel).update(
                    intels_update_onSuccess,
                    intels_update_onFailure
                );
        });
    }


    function intels_create_onSuccess(data) {
        intels_statusSuccess('Création effectuée avec succès.');
    }


    function intels_create_onFailure(err) {
        intels_statusDanger('La création de ... a échouer.');
    }


    function intels_update_onSuccess(data) {
        intels_statusSuccess('Mise à jour effectuée avec succès.');
    }


    function intels_update_onFailure(err) {
        intels_statusDanger('La mise à jour a échoué.');
    }


    function intels_statusDanger(message) {
        const base = document.getElementById('IntelsModal-status');

        base.querySelectorAll('.form-alert').forEach(item => { item.classList.remove('show'); });

        const _ = base.querySelector('.form-alert.alert-danger');
        _.innerHTML = message;
        _.classList.add('show');
    }


    function intels_statusSuccess(message) {
        const base = document.getElementById('IntelsModal-status');

        base.querySelectorAll('.form-alert').forEach(item => { item.classList.remove('show'); });

        const _ = base.querySelector('.form-alert.alert-success');
        _.innerHTML = message;
        _.classList.add('show');
    }


    /**************************************************************************************************
     *  CHILDREN
     **************************************************************************************************/

    function renderChildren() {

        for (const child of Object.values(siblingHelper.children())) {
            if (child.id != user_id)
                child.renderCard();
        }

        siblingHelper.renderCardAdd();
    }


    function children_listenInputs(e) {
        const result = childAdded.validate(e.id, e.value);
        console.log(result);

        if (!result.status) {
            inputDanger(e.id);
            children_statusDanger(result.message);
        }
        else {
            inputNeutral(e.id);
        }
    }


    function children_statusDanger(message) {
        const base = document.getElementById('AddChild-status');

        base.querySelectorAll('.form-alert').forEach(item => { item.classList.remove('show'); });

        const _ = base.querySelector('.form-alert.alert-danger');
        _.innerHTML = message;
        _.classList.add('show');
    }


    function createChild() {
        const r = childAdded.createChild(
            createChild_onSuccess,
            createChild_onFailure
        );

        if (typeof (r) === 'string')
            statusDanger(r);
    }


    function createChild_onSuccess(data) {
        console.log(data);
        statusSuccess('Informations enregistrées.');
    }


    function createChild_onFailure(err) {
        console.log(err);
        if (err.includes && err.includes('Values can')) {
            statusDanger('Erreur, informations incomplètes.');
        }
    }


    /*****************************************************************************
     *  RECORDS
     *****************************************************************************/

    /* */
    function renderRecords() {
        if (!isChild)
            return 'User is not a child';

        const wrapper = document.getElementById('Records-wrapper');

        for (const sy of App._SchoolYears_unordered) {

            // Create record wrapper
            if (sy.is_active) {
                const old = wrapper.innerHTML
                wrapper.innerHTML = recordsHelper.renderRecordItem(sy);
                wrapper.innerHTML += old;
            }
            else {

                wrapper.innerHTML += recordsHelper.renderRecordItem(sy);
            }
        }

        for (const record of Object.values(recordsHelper.records())) {
            record.updateRecordItem();
        }
    }


    /*****************************************************************************
     *  RECORD
     *****************************************************************************/

    function renderRecord() {



    }


    /**************************************************************************************************
     *  MODALS
     **************************************************************************************************/

    function openModal(id) {
        document.getElementById(id).classList.add('show');
    }


    function closeModal() {
        document.querySelectorAll('.modal').forEach(item => item.classList.remove('show'));
    }


    function postProcess() {
        document.getElementById('user_dob').value = '{{ user.dob | safe }}';
        document.getElementById('user_city').value = '{{ user.address.zip_code | safe }}';
    }
</script>
{% endblock %}